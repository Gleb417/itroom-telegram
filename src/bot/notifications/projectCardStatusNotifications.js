/**
 * –§–æ—Ä–º–∏—Ä—É–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ –æ–± –∏–∑–º–µ–Ω–µ–Ω–∏–∏ —Å—Ç–∞—Ç—É—Å–∞ —ç–ª–µ–º–µ–Ω—Ç–∞ –ø—Ä–æ–µ–∫—Ç–∞.
 * @param {string} action - –¢–∏–ø –¥–µ–π—Å—Ç–≤–∏—è (`edited`).
 * @param {object} from - –°—Ç–∞—Ä—ã–π —Å—Ç–∞—Ç—É—Å, —Å–æ–¥–µ—Ä–∂–∏—Ç –∏–º—è (`name`) –∏ —Ü–≤–µ—Ç (`color`).
 * @param {object} to - –ù–æ–≤—ã–π —Å—Ç–∞—Ç—É—Å, —Å–æ–¥–µ—Ä–∂–∏—Ç –∏–º—è (`name`) –∏ —Ü–≤–µ—Ç (`color`).
 * @param {object} taskDetail - –î–µ—Ç–∞–ª–∏ –∑–∞–¥–∞—á–∏, –≤–∫–ª—é—á–∞—è –∑–∞–≥–æ–ª–æ–≤–æ–∫, URL –∏ –¥–∞—Ç—É –∏–∑–º–µ–Ω–µ–Ω–∏—è.
 * @returns {string} - –°—Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –≤ —Ñ–æ—Ä–º–∞—Ç–µ Markdown.
 */
export function formatProjectCardStatusNotification(
	action,
	from,
	to,
	taskDetail
) {
	// –ü—Ä–æ–≤–µ—Ä—è–µ–º —Ç–∏–ø –¥–µ–π—Å—Ç–≤–∏—è: –µ—Å–ª–∏ `edited`, –¥–æ–±–∞–≤–ª—è–µ–º —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ —Å–º–µ–Ω–µ —Å—Ç–∞—Ç—É—Å–∞
	const statusAction = action === 'edited' ? 'üîÑ –°—Ç–∞—Ç—É—Å –∑–∞–¥–∞—á–∏ –∏–∑–º–µ–Ω–µ–Ω!' : ''

	/**
	 * –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è —Ü–≤–µ—Ç–∞ –≤ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–π —ç–º–æ–¥–∑–∏.
	 * @param {string} color - –ù–∞–∑–≤–∞–Ω–∏–µ —Ü–≤–µ—Ç–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, "red", "green").
	 * @returns {string} - –≠–º–æ–¥–∑–∏, —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–µ–µ —Ü–≤–µ—Ç—É.
	 */
	const getColorEmoji = color => {
		// –°–ª–æ–≤–∞—Ä—å –¥–ª—è —Å–æ–ø–æ—Å—Ç–∞–≤–ª–µ–Ω–∏—è —Ü–≤–µ—Ç–∞ —Å —ç–º–æ–¥–∑–∏
		const colorMap = {
			red: 'üî¥', // –ö—Ä–∞—Å–Ω—ã–π
			green: 'üü¢', // –ó–µ–ª–µ–Ω—ã–π
			yellow: 'üü°', // –ñ–µ–ª—Ç—ã–π
			blue: 'üîµ', // –°–∏–Ω–∏–π
			purple: 'üü£', // –§–∏–æ–ª–µ—Ç–æ–≤—ã–π
			orange: 'üü†', // –û—Ä–∞–Ω–∂–µ–≤—ã–π
			gray: '‚ö™Ô∏è', // –°–µ—Ä—ã–π
		}
		// –ü—Ä–µ–æ–±—Ä–∞–∑—É–µ–º —Ü–≤–µ—Ç –≤ –Ω–∏–∂–Ω–∏–π —Ä–µ–≥–∏—Å—Ç—Ä –∏ –∏—â–µ–º –µ–≥–æ –≤ —Å–ª–æ–≤–∞—Ä–µ
		// –ï—Å–ª–∏ —Ü–≤–µ—Ç –Ω–µ –Ω–∞–π–¥–µ–Ω, –≤–æ–∑–≤—Ä–∞—â–∞–µ–º —á–µ—Ä–Ω–æ–µ —ç–º–æ–¥–∑–∏ (‚ö´Ô∏è)
		return colorMap[color.toLowerCase()] || '‚ö´Ô∏è'
	}

	// –ü—Ä–µ–æ–±—Ä–∞–∑—É–µ–º —Ü–≤–µ—Ç–∞ –∏–∑ –≤–µ—Ä—Ö–Ω–µ–≥–æ —Ä–µ–≥–∏—Å—Ç—Ä–∞ –≤ –Ω–∏–∂–Ω–∏–π
	const fromColor = from.color.toLowerCase()
	const toColor = to.color.toLowerCase()

	// –§–æ—Ä–º–∏—Ä—É–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ
	const message =
		`${statusAction}\n\n` +
		`üìå *–ó–∞–¥–∞—á–∞:* [${taskDetail.title}](${taskDetail.url})\n` +
		`‚ùå *–°—Ç–∞—Ä—ã–π —Å—Ç–∞—Ç—É—Å:* ${getColorEmoji(fromColor)} ${from.name}\n` +
		`‚úÖ *–ù–æ–≤—ã–π —Å—Ç–∞—Ç—É—Å:* ${getColorEmoji(toColor)} ${to.name}\n` +
		`üìÖ *–î–∞—Ç–∞ –∏–∑–º–µ–Ω–µ–Ω–∏—è:* ${new Date(taskDetail.updatedAt).toLocaleString(
			'ru-RU'
		)}`

	// –í–æ–∑–≤—Ä–∞—â–∞–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ –≤ —Ñ–æ—Ä–º–∞—Ç–µ Markdown
	return { message }
}
